# 组合模式
## 1. 概念
Composite，又称对象树、Object Tree。从别名可以看出此模式将对象组合成树状结构，让用户能以相同的方式使用单独对象和组合对象。

## 2.意图
用一个共同的接口描述小的组件和大的组合对象所有的共同操作，大的组合对象通过将工作委派给子元素，自己只处理中间结果，保证整体和个体的操作统一。也让调用方省去了逐个遍历小组件进行操作。

## 3.类图示例
![composite](../../resource/design_pattern/composite.drawio.png)

## 4.适用场景
### 4.1 实际业务场景
* 如果需要描述一组复杂的嵌套树状结构对象，可以使用组合模式
* 如果对象的组合和单个子组件行为相同，而调用方又可以同时调用子组件和复杂对象，那也可以使用组合模式。
  * 组合计费，一个大的收费项目由多个单独的收费项和小的收费项目组合，每种收费组合还有自己的计算方式，可以采用组合模式，

### 4.2 开源实例
* java.util.List#addAll(Collection)

## 5.实现细节和技巧

* 要适用组合模式，需保证核心模型能以树状结构表示，即每个容器(中间结点)可以包含其他的容器(中间结点)和单个对象(叶子结点)。
* 容器和单个对象要有部分共同的接口，否则强行用组合会增加额外的使用负担。
* 实现共同接口时注意容器的实现通常是调用容器内部子元素或者子容器的相应实现的。



## 6.优缺点

优点：

* 符合开闭原则。
* 利用了多态和递归，可以方便地使用整个树或者部分树。

缺点：

* 如果有些个体对象和公共接口有较大差别时可能会破坏一定的接口隔离原则。



## 7.与其他设计模式的关系

# 享元模式
## 1.概念
享元模式是一种结构型设计模式，又称缓存/Cache/Flyweight。利用共享的方式来支持大量细粒度的对象，这些对象内部的一部分状态是相同的。

## 2.意图
是一种将多个对象共用数据统一存储的方法论，通过：
* 将多种不同对象中共用的相同的部分抽取出来。这一部分形成的对象就是享元对象。
* 将不相同的部分抽取到享元的容器对象中。

可以显著减少大量对象中重复成员带来的内存冗余。

## 3.类图示例

## 4.适用场景
### 4.1 业务场景
业务中很多缓存的场景其实就是享元模式设计思想的体现：
* 比如计费的时候每个人都有不同的费率组合，但是单独的费率只有有限种且不会轻易修改，所以可以使用享元模式。
  * 将费率对象作为享元，每个用户关联一个计费 model 类，这个类作为享元的容器。

### 4.2 开源实例
jdk中有很多享元做缓存的实例，比如：
* java.lang.Integer#valueOf(int) ，缓存 -128~127 的 Integer 对象

## 5.实现细节和技巧
* 抽取享元需要大量对象中有数据相同的重复部分。
* 享元的效果取决于实际场景，即：
  * 同时有大量相似对象。
  * 这些对象占用了大量内存。
  * 这些对象有变化很少的部分数据。
* 通过享元工厂创建享元，这样就可以控制对象生成的数量。

## 6.优缺点
优点：
* 节省内存空间。

缺点：
* 代码组织变复杂。
* 执行效率可能会降低（用时间换空间）。

## 7.与其他设计模式的关系

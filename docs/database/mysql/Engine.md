# 存储引擎
MySQL 支持多种存储引擎，可以使用
```
SHOW ENGINES;
```

语句查看有哪些存储引擎可用。

## 1.存储引擎特性
常见的几种存储引擎：
|存储引擎|描述|
|---|---|
|ARCHIVE|数据存档引擎，行被插入后就不能被修改了|
|BLACKHOLE|会丢弃写操作，读操作会返回空内容|
|CSV|以逗号作为数据项之间的分隔符|
|FEDERATED|用来访问远程表的存储引擎|
|InnoDB|具备外键支持功能的事务处理存储引擎，MySQL 5.5 版本后的默认引擎|
|MEMORY|内存引擎|
|MERGE|用来管理由多个MyISAM表构成的表合集|
|MyISAM|主要的非事务处理存储引擎，MySQL 5.5 版本前的默认引擎|
|NDB|MySQL 集群专用存储引擎|

MySQL 的存储引擎是`插件式`的，允许将第三方开发的存储引擎集成到服务器中。

### 1.1 查看具体的引擎信息
使用：
```
SHOW ENGINES\G;

Engine : InnoDB // TODO
```

* Support 值表示引擎可用状态，`YES`/`NO`/`DEFAULT`/`DISABLE`，其中 `DISABLE` 表示该引擎存在但是被禁用。
* Transactions 值表示是否支持事务。
* XA 值表示是否支持分布式事务。
* Savepoints 值表示是否支持部分事务回滚。

### 1.2 表的磁盘存储和存储引擎
MySQL 在创建表时会创建一个磁盘文件用于存储表定义，格式为 `表名.frm`，这个文件不会随存储引擎而变化。但是有些存储引擎会额外创建文件用于存储表相关的额外内容。
|存储引擎|磁盘文件|
|---|---|
|InnoDB|`.ibd` 数据和索引|
|MyISAM|`.MYD` 数据，`.MYI` 索引|
|CSV|`.CSV` 数据，`.CSM` 元数据|

有几种特殊情况：
* InnoDB 在默认情况下回把数据和索引存储在它的系统表空间中，如果手动配置了 InnoDB 为每个表分别创建一个表空间，此时才会有 `.ibd` 文件。
* MEMORY 的表和数据都在内存中。

## 2. InnoDB 
是 MySQL 在 5.5 版本后的默认存储引擎。

具有如下特性：
* 支持事务，实现了4个标准的隔离级别，默认是 RR （可重复读），实际通过 MVVC 和 Next-key lock 可以防止幻读。
* 完整支持外键，包括级联删除和更新。
* 主索引是聚簇索引，在索引中存储了数据，避免高频读取磁盘，提升了查询性能。
* 从 5.6 版本起，支持全文搜索和 `FULLTEXT` 索引。
* 支持在线热备份。

是最常用的存储引擎，只要有事务要求基本都会选择此引擎。

## 3. MyISAM
是 MySQL 在 5.5 版本之前的默认存储引擎。

具有如下特性：
* 不支持事务。
* 不支持行锁，并发操作由表锁控制（并发插入 CONCURRENT INSERT）。
* 支持全文搜索和 `FULLTEXT` 索引。
* 支持空间数据类型和 `SPATIAL` 索引。
* 当保存连续相似的字符串、数字索引时，会进行键压缩。
* 支持检查和恢复操作，也可以通过设置 `myisam_recover_options` 变量来进行自动检查和修复。和事务回滚不同，修复操作慢且有可能丢失数据。

设计简单，如果不考虑事务和恢复，可以使用此引擎。


## 4. MEMORY
区别于其他引擎把数据存储在磁盘，MEMORY 引擎会把数据存储在内存中。

具有如下特性：
* 数据内容存储在内存中，数据表行的长度固定，操作数据速度快。
* 数据表具有临时性，服务器掉电时，数据内容也会消失（表不会消失，数据会）。
* 默认情况使用散列索引，对`相等比较`操作很快，对`范围比较`操作很慢。
* 行长度固定，所以不能使用 `BLOB` 和 `TEXT` 这种变长数据类型，但是可以使用 `VARCHAR`（在 MySQL 中会被当做长度不变的 `CHAR` 类型）。
